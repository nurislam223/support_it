<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#C9DEFA" />
  <meta name="description" content="База вопросов для изучения IT технологий" />
  <title>База вопросов - IT обучение</title>
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;500;600;700&family=Ubuntu:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-white-solid: #ffffff;
      --color-black-solid: #000000;
      --color-azure-88: #C9DEFA;
      --color-grey-21: #343536;
      --color-grey-46: #757575;
      --color-grey-71: #B6B6B6;
      --sidebar-width: 255px;
      --header-height: 60px;
      --safe-area-inset-left: env(safe-area-inset-left);
      --safe-area-inset-right: env(safe-area-inset-right);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Ubuntu', sans-serif;
      background-color: var(--color-white-solid);
      color: var(--color-grey-21);
      overflow-x: hidden;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .page {
      display: flex;
      min-height: 100vh;
      min-height: 100dvh;
    }

    /* Sidebar - скрыт по умолчанию */
    nav.sidebar {
      width: var(--sidebar-width);
      background: var(--color-white-solid);
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 1000;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }

    .sidebar.active {
      transform: translateX(0);
    }

    .sidebar h1 {
      font-family: 'Unbounded', sans-serif;
      font-size: clamp(20px, 2vw, 24px);
      font-weight: 400;
      line-height: 1.35;
      margin-bottom: 15px;
    }

    .search-box {
      position: relative;
      margin-bottom: 20px;
    }

    .search-box input {
      width: 100%;
      height: 40px;
      padding: 10px 35px 10px 40px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      font-family: 'Unbounded', sans-serif;
      font-size: 14px;
      color: var(--color-grey-46);
      background: var(--color-white-solid);
      transition: border-color 0.2s ease;
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--color-black-solid);
    }

    .search-box svg {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    .section-title {
      font-family: 'Unbounded', sans-serif;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      margin: 20px 0 12px;
      color: var(--color-grey-46);
    }

    .nav-list {
      padding-left: 15px;
    }

    .nav-item {
      opacity: 0.8;
      font-family: 'Unbounded', sans-serif;
      font-size: 14px;
      font-weight: 400;
      padding: 12px 0;
      cursor: pointer;
      transition: opacity 0.2s ease;
      border-bottom: 1px solid transparent;
    }

    .nav-item:hover,
    .nav-item:focus {
      opacity: 1;
      border-bottom-color: var(--color-black-solid);
    }

    .nav-item:active {
      transform: scale(0.98);
    }

    .footer-note {
      opacity: 0.6;
      font-family: 'Unbounded', sans-serif;
      font-size: 13px;
      margin-top: auto;
      padding-top: 20px;
    }

    /* Main content */
    main {
      flex: 1;
      background: var(--color-azure-88);
      padding: 30px 0 40px;
      margin-left: 0;
      min-height: 100vh;
      transition: margin-left 0.3s ease;
    }

    .section {
      max-width: 1200px;
      margin: 0 auto 50px;
      padding: 0 clamp(20px, 4vw, 40px);
    }

    .section-header {
      font-family: 'Unbounded', sans-serif;
      font-size: clamp(32px, 5vw, 50px);
      font-weight: 500;
      line-height: 1.17;
      text-align: left;
      margin-bottom: 40px;
      padding: 0 10px;
    }

    /* Cards grid */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(100%, 350px), 1fr));
      gap: clamp(20px, 3vw, 30px);
      width: 100%;
    }

    .card {
      background: var(--color-white-solid);
      display: flex;
      flex-direction: column;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    .card:active {
      transform: translateY(-2px);
    }

    .card-image {
      width: 100%;
      height: 250px;
      object-fit: cover;
      background: var(--color-grey-71);
      object-position: center;
    }

    .card-content {
      padding: clamp(20px, 3vw, 24px);
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card-title {
      font-family: 'Unbounded', sans-serif;
      font-size: clamp(18px, 2vw, 20px);
      font-weight: 700;
      line-height: 1.35;
      margin: 0;
    }

    .card-text {
      font-size: clamp(14px, 1.5vw, 16px);
      line-height: 1.5;
      color: var(--color-grey-46);
      flex: 1;
      margin: 0;
    }

    .card-actions {
      display: flex;
      gap: 12px;
      margin-top: auto;
    }

    .btn {
      padding: 12px 20px;
      font-family: 'Unbounded', sans-serif;
      font-size: 14px;
      font-weight: 600;
      line-height: 1.4;
      text-align: center;
      cursor: pointer;
      border-radius: 8px;
      white-space: nowrap;
      border: none;
      transition: all 0.2s ease;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex: 1;
    }

    .btn:focus {
      outline: 2px solid var(--color-black-solid);
      outline-offset: 2px;
    }

    .btn-primary {
      background: var(--color-black-solid);
      color: var(--color-white-solid);
    }

    .btn-primary:hover,
    .btn-primary:focus {
      background: var(--color-grey-21);
      transform: translateY(-1px);
    }

    .btn-outline {
      background: transparent;
      color: var(--color-black-solid);
      border: 2px solid var(--color-black-solid);
    }

    .btn-outline:hover,
    .btn-outline:focus {
      background: var(--color-black-solid);
      color: var(--color-white-solid);
      transform: translateY(-1px);
    }

    /* Mobile menu */
    mobile-menu-btn {
    display: flex;
    position: fixed;
    left: 20px;
    top: 20px;
    background: rgba(255, 255, 255, 0.8); /* Полупрозрачный белый */
    border: 2px solid var(--color-black-solid);
    border-radius: 8px;
    cursor: pointer;
    z-index: 1001;
    width: 44px;
    height: 44px;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: background-color 0.2s ease;
}

.mobile-menu-btn:hover {
    background: rgba(255, 255, 255, 0.9);
}

    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }

    .overlay.active {
      display: block;
    }

    /* Loading states */
    .card-image.loading {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Адаптивность */
    /* Планшеты */
    @media (max-width: 1024px) {
      :root {
        --sidebar-width: 240px;
      }

      .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(min(100%, 320px), 1fr));
        gap: 25px;
      }

      .section-header {
        margin-bottom: 35px;
      }
    }

    /* Мобильные устройства */
    @media (max-width: 768px) {
      .page {
        flex-direction: column;
      }

      nav.sidebar {
        width: 280px;
      }

      .cards-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .section-header {
        margin-bottom: 30px;
        text-align: center;
      }

      .card-content {
        padding: 20px;
      }

      .card-actions {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        min-height: 48px;
      }
    }

    /* Десктоп */
    @media (min-width: 769px) {
      main.with-sidebar {
        margin-left: var(--sidebar-width);
      }
    }

    /* Маленькие мобильные */
    @media (max-width: 480px) {
      .section {
        padding: 0 15px;
      }

      .section-header {
        font-size: 28px;
        margin-bottom: 25px;
      }

      .card {
        border-radius: 10px;
      }

      .card-image {
        height: 200px;
      }
    }

    /* Большие экраны */
    @media (min-width: 1440px) {
      .section {
        max-width: 1400px;
      }

      .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      }
    }

    /* Портретные планшеты */
    @media (min-width: 769px) and (max-width: 1024px) and (orientation: portrait) {
      .cards-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Пейзажные мобильные */
    @media (max-width: 896px) and (orientation: landscape) {
      .sidebar {
        padding-top: env(safe-area-inset-top);
      }

      .mobile-menu-btn {
        top: env(safe-area-inset-top);
      }
    }

    /* Улучшенная доступность */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Фокус для клавиатурной навигации */
    .nav-item:focus-visible,
    .btn:focus-visible,
    .card:focus-visible {
      outline: 2px solid var(--color-black-solid);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Overlay для мобильного меню -->
    <div class="overlay" id="overlay"></div>

    <!-- Mobile menu button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Открыть меню" aria-expanded="false" aria-controls="sidebar">
      <svg class="menu-icon" width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="28" height="1" fill="var(--color-black-solid, black)"/>
        <rect y="8" width="28" height="1" fill="var(--color-black-solid, black)"/>
        <rect y="16" width="28" height="1" fill="var(--color-black-solid, black)"/>
      </svg>
      <svg class="close-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <path d="M1 1L19 19M19 1L1 19" stroke="var(--color-black-solid)" stroke-width="2"/>
      </svg>
    </button>

    <!-- Sidebar / Navigation -->
    <nav class="sidebar" id="sidebar" aria-label="Основная навигация">
      <div>
        <h1>База<br>вопросов</h1>

        <div class="search-box">
          <input type="text" placeholder="Поиск" aria-label="Поиск по базе вопросов" id="searchInput">
          <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.4886 5.88614C14.4034 4.40318 13.7386 3.05659 12.6307 2.085C11.5227 1.09636 10.1079 0.584999 8.62497 0.687272C7.14202 0.772499 5.77838 1.43727 4.78974 2.56227C2.88065 4.72705 2.96588 7.96568 4.89202 10.0452L3.98861 11.085L3.56247 10.71L0.528381 14.1191L2.06247 15.4998L5.09656 12.0566L4.73861 11.7498L5.64202 10.71C6.63065 11.4259 7.78975 11.7839 8.93179 11.7839C10.4659 11.7839 12 11.1532 13.0909 9.92591C14.0966 8.80091 14.5909 7.36909 14.4886 5.88614ZM12.3409 9.24409C10.6875 11.102 7.82384 11.2725 5.93179 9.63614C4.07384 7.96568 3.90338 5.10205 5.53974 3.22704C6.34088 2.30659 7.46588 1.77818 8.67611 1.71H8.94884C10.0568 1.71 11.1136 2.11909 11.9488 2.86909C12.8522 3.67023 13.3977 4.76114 13.4659 5.97136C13.5511 7.16455 13.142 8.32364 12.3409 9.24409Z" fill="var(--color-grey-71, #B6B6B6)"/>
          </svg>
        </div>

        {% for section in sidebar_sections %}
          <div>
            <div class="section-title">{{ section }}</div>
            <div class="nav-list">
              {% for item in sidebar_sections[section] %}
                <div class="nav-item" tabindex="0" role="button">{{ item }}</div>
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="footer-note">Хочу в IT</div>
    </nav>

    <main id="mainContent">
      <!-- Софты 💬 -->
      <section class="section" aria-labelledby="softs-header">
        <h2 class="section-header" id="softs-header">Софты 💬</h2>
        <div class="cards-grid">
          {% for card in softs %}
            <article class="card">
              <img src="{{ card['image'] }}" alt="{{ card['name'] }}" class="card-image" loading="lazy">
              <div class="card-content">
                <h3 class="card-title">{{ card['name'] | safe }}</h3>
                <p class="card-text">{{ card['description'] }}</p>
                <div class="card-actions">
                  <button class="btn btn-primary">Изучить</button>
                  {% if card.progress is defined %}
                    <button class="btn btn-outline">{{ card.progress }}</button>
                  {% endif %}
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      </section>

      <!-- Харды ⚙️ -->
      <section class="section" aria-labelledby="hards-header">
        <h2 class="section-header" id="hards-header">Харды ⚙️</h2>
        <div class="cards-grid">
          {% for card in hards %}
            <article class="card">
              <img src="{{ card.image }}" alt="{{ card.title }}" class="card-image" loading="lazy">
              <div class="card-content">
                <h3 class="card-title">{{ card.title | safe }}</h3>
                <p class="card-text">{{ card.description }}</p>
                <div class="card-actions">
                  <button class="btn btn-primary">Изучить</button>
                  {% if card.progress is defined %}
                    <button class="btn btn-outline">{{ card.progress }}</button>
                  {% endif %}
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      </section>
    </main>
  </div>

  <script>
    // Мобильное меню
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const mainContent = document.getElementById('mainContent');
    const searchInput = document.getElementById('searchInput');
    const menuIcon = document.querySelector('.menu-icon');
    const closeIcon = document.querySelector('.close-icon');

    function toggleMenu() {
      const isExpanded = mobileMenuBtn.getAttribute('aria-expanded') === 'true';
      mobileMenuBtn.setAttribute('aria-expanded', !isExpanded);
      sidebar.classList.toggle('active');
      overlay.classList.toggle('active');

      // Смена иконки
      if (!isExpanded) {
        menuIcon.style.display = 'none';
        closeIcon.style.display = 'block';
      } else {
        menuIcon.style.display = 'block';
        closeIcon.style.display = 'none';
      }

      // На десктопе добавляем/убираем отступ у main
      if (window.innerWidth >= 769) {
        if (!isExpanded) {
          mainContent.classList.add('with-sidebar');
        } else {
          mainContent.classList.remove('with-sidebar');
        }
      }

      // На мобильных блокируем скролл body когда меню открыто
      if (window.innerWidth < 769) {
        document.body.style.overflow = isExpanded ? 'auto' : 'hidden';
      }
    }

    function closeMenu() {
      mobileMenuBtn.setAttribute('aria-expanded', 'false');
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
      mainContent.classList.remove('with-sidebar');
      menuIcon.style.display = 'block';
      closeIcon.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    mobileMenuBtn.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', closeMenu);

    // Закрытие меню по ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && sidebar.classList.contains('active')) {
        closeMenu();
      }
    });

    // Обработчик изменения размера окна
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 769 && sidebar.classList.contains('active')) {
        mainContent.classList.add('with-sidebar');
      } else {
        mainContent.classList.remove('with-sidebar');
        document.body.style.overflow = 'auto';
      }

      // На десктопе всегда показываем иконку меню
      if (window.innerWidth >= 769) {
        menuIcon.style.display = 'block';
        closeIcon.style.display = 'none';
      }
    });

    // Оптимизация для тач-устройств
    if ('ontouchstart' in window) {
      document.documentElement.classList.add('touch-device');
    }

    // Ленивая загрузка изображений с fallback
    document.addEventListener('DOMContentLoaded', function() {
      const images = document.querySelectorAll('.card-image');

      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src || img.src;
            img.classList.remove('loading');
            imageObserver.unobserve(img);
          }
        });
      });

      images.forEach(img => {
        if (!img.complete) {
          img.classList.add('loading');
        }
        imageObserver.observe(img);
      });
    });

    // Улучшенная доступность для навигации
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          item.click();
        }
      });

      // Закрываем меню при клике на пункт на мобильных
      item.addEventListener('click', () => {
        if (window.innerWidth < 769) {
          closeMenu();
        }
      });
    });
  </script>
</body>
</html>
